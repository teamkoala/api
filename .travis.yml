sudo: required
rvm:
  - 2.3.1

before_script:
  - bundle exec rake db:create RAILS_ENV=test
  - bundle exec rake db:migrate RAILS_ENV=test

script:
  - bundle exec rspec spec

deploy:
  - provider: heroku
    app: rocky-sands-79934
    api_key:
      secure: Zs2+jUAJ0wLOhkOUzvokg3OBGNsKxiEYVNG6bkIluje+iJQ9RkW9/JMuo4BT4ksfRyEob634eOWJrX6Tk8aj7R4qmDTFlzPDynDfgJFV3V3aR87Tq0N03CJmOctdy9l56JK90NW7vAotuQu2dvYOUfe6NJa88fPsgbuUTlrvncLKw+DySb0exhodf2E2iWbE+dx3EUQvbxq4t8lhEKBOMMJw6ZDdUvH/GVWX2AfeiWENAxh3LBUw+GcU8vYcMTeLoRxbXl4B1kTuZRZcuqKlqicB698cbvSw8BCl+oeBcOcIv37TS12uyflyo2Ftvh4XgopdTITlIDMens0aTT8mrKYgPE8bjSN4p8QiM6p6cZLJZ0Trpo/349hg8ivrRvaC5eO+edLqiCEz3xuLaJBFz4Lbtpq4MjU8yUp2Uo0Yl0rPCXiDLpvNiOW6Vlo6QnxGK8JMpXE8Pkbrw4zIpmEqmXi5SziteUvGl8rLAPtagE6dkmY48dIkhf3IB446I9GrsBezwJJOd4XuHwCbBezzOZnToFEKb0yqnVi/gPEzEYu1emYPE6lopkJ931YtJVqN5W1CLTVNgf8TZPhhPcDxju8T+BpuyT9K+hfkp7NoD1ysduc9rAVgJeDb98y3zw9B7R7crwVSw28wfdJinw9FcaadTQfpZS50dnQIjYU2oA4=
    run:
      - rake db:migrate
      - rake db:seed
    on:
      branch: master
  - provider: elasticbeanstalk
    region: us-west-2
    app: api
    env: prod-EBEn-1D6D1R597XFB7
    bucket-name: elasticbeanstalk-us-west-2-863445156434
    access_key_id:
      secure: fou9MUKmK5tZHAA7zWrdKMfFTq0MADoNG0AsoCKgEevMw+WXXxH4z2L3k6wDNDdGwzqpG9Qw9PAxnM/X3roySqhG4s2KZ23TfPCr68fdMB1PkuzcUl8uiKy7NsyfF/hQ8iDvV1w8ZJvfDHeX5Zq55TTEr+p/JD5wMz/eDNmgyLtLVgoYu/ea3gXnYektRsSiX4hO0uAi5Zn3rJHY29ouTA2GV9u7GWWsyOzqOR3UyED27bgkaYqju2iZUIu4UDgG95RNIhsnECNfgKKSyvB/Ztcpvi3sspmmE0IAVwHBack/RpViZV93cWvyDtEdnzUJD0VUb4/55kGOFK+hC6blqc27iaChhmC8B+TWVbI7nW4TtCucQVZhTctGqfmzg7aR/1VtAygMEziVEwOAbjhI2UALwcubrrRVvXKiDfXktefxJIUWhoSF0saEr76ve51htjmEiuuw4jFI3eW0wINC2rlYwvuhyOfd+JDb98QCugJATkdaiPLYMAUokYj9i3QoS3UtZFJsXBoA3ae6HDYSlPkQ5Et7ns4yqm904sEPeDMsUd9UAK8wEZq6yQVpuKQRrw/CObCsPbTPwaPqPni4qSK6kzdf7e6gSH8nwk8Fgqbt80h+lwHpBP5SWG+gYoDbZAR3UJmwhvJdByFwFhnM4xObxS3Q5FV8SQeIPSOwBJs=
    secret_access_key:
      secure: aPdQqi3ov8h/mtvCcir2p/QkkfFxy3zEvQUB0x6vL3yKrVfmu+8k1VCH+aQFmAKfdvce7vWfOrE5YUCOpGNI49Dq72zDdKfpHrxfsZdJQ/GRfduxsIEr51Cjs2C/6g1wsmvDblZH1IVd5n7Imj3j6upRCw6/Q56a4o6BxV0G3NFTfPzP3BenYLEfyojIrDF01t5qCkCf8VIRoL1nDzSJwilSHviAxfTYQCQttYEBq4Z0xu0eyzQ30as3/30Ya5pDBC53xDif1gM87bIP60Q4Ba5+wBoIOgXM+hlSdRk4umayBfQRBdMLnlDkCVDtXhK7HPpSbbxkb7nSuq8oNeNA7BWGW8oBGCAJYnl/TXSVkFYhrlhx1H4u73Yqwtlf7INfmU5/e4hH8yaXoDHRczjVo/VFZUj4TI9sGxhbTUnMhx7515L46cx+wLpPMJiy2SIgyao3AaAZSDAoChBLrWMCsNc60YWxwwMLM0advbScALvs4elk+di7jXO+JK65KLIZelhLvQj9PHfbWC2WiOCOnEZ4c9bTxhwhVVT2PHWq4NtelX6kyWV6H4Bk7eXJi9dcNiWRjfxOVyLmRRBv9SI0nUsfFc4FwpxPYf6o/nmMDfwZUsCyN52Dnv+xGq8BC+RfLmvy3JCLYZpUfOJ2WxGj/CCv6Kbj6Mx55mhWjeqUs5c=
    on:
      branch: master
